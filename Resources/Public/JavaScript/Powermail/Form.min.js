!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,l(e,t,"get"))}function n(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,l(e,t,"set"),i),i}function l(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function o(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function u(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(e,t,i){u(e,t),t.set(e,i)}function c(e,t){u(e,t),t.add(e)}var h=function(){function t(){e(this,t)}return i(t,null,[{key:"getLargestFileSize",value:function(e){for(var t=0,i=0;i<e.files.length;i++){var a=e.files[i];a.size>t&&(t=a.size)}return t}},{key:"isFileExtensionInList",value:function(e,t){return-1!==t.indexOf("."+e)}},{key:"getExtensionFromFileName",value:function(e){return e.split(".").pop().toLowerCase()}},{key:"getUriWithoutGetParam",value:function(e){return e.split("?")[0]}},{key:"getRandomString",value:function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}},{key:"redirectToUri",value:function(e){-1!==e.indexOf("http")?window.location=e:window.location.pathname=e}},{key:"hideElement",value:function(e){null!==e&&(e.style.display="none")}},{key:"showElement",value:function(e){null!==e&&(e.style.display="block")}}]),t}();function d(){var e="btn-primary";this.initialize=function(){a(),t()};var t=function(){for(var e=document.querySelectorAll("form.powermail_morestep"),t=0;t<e.length;t++)i(e[t])},i=function(e){r(0,e)},a=function(){for(var e=document.querySelectorAll("[data-powermail-morestep-show]"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target.getAttribute("data-powermail-morestep-show"),i=e.target.closest("form");r(t,i)}))},r=function(e,t){n(t);var i=u(t);c(i[e]),l(t)},n=function(e){for(var t=u(e),i=0;i<t.length;i++)s(t[i])},l=function(t){for(var i=t.querySelectorAll("[data-powermail-morestep-current]"),a=o(t),r=0;r<i.length;r++)i[r].classList.remove(e),r===a&&i[r].classList.add(e)},o=function(e){for(var t=u(e),i=0;i<t.length;i++)if("none"!==t[i].style.display)return i},u=function(e){return e.querySelectorAll(".powermail_fieldset")},s=function(e){e.style.display="none"},c=function(e){e.style.display="block"}}var f=new WeakMap,p=function(){function t(){e(this,t),s(this,f,{writable:!0,value:"[data-powermail-validate]"})}return i(t,[{key:"validate",value:function(){document.querySelectorAll(r(this,f)).forEach((function(e){(e=new oe(e)).validate()}))}}]),t}(),m=new WeakMap,w=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,k=new WeakMap,S=new WeakMap,A=new WeakMap,W=new WeakSet,E=new WeakSet,q=new WeakSet,L=new WeakMap,_=new WeakSet,x=new WeakSet,z=new WeakSet,C=new WeakSet,M=new WeakSet,F=new WeakSet,I=new WeakSet,T=new WeakSet,P=new WeakSet,O=new WeakSet,N=new WeakSet,j=new WeakSet,D=new WeakSet,R=new WeakSet,U=new WeakSet,G=new WeakSet,V=new WeakSet,H=new WeakSet,$=new WeakSet,B=new WeakSet,J=new WeakSet,K=new WeakSet,Q=new WeakSet,X=new WeakSet,Y=new WeakSet,Z=new WeakSet,ee=new WeakSet,te=new WeakSet,ie=new WeakSet,ae=new WeakSet,re=new WeakSet,ne=new WeakSet,le=new WeakSet,oe=function(){function t(i){var l=this;e(this,t),c(this,le),c(this,ne),c(this,re),c(this,ae),c(this,ie),c(this,te),c(this,ee),c(this,Z),c(this,Y),c(this,X),c(this,Q),c(this,K),c(this,J),c(this,B),c(this,$),c(this,H),c(this,V),c(this,G),c(this,U),c(this,R),c(this,D),c(this,j),c(this,N),c(this,O),c(this,P),c(this,T),c(this,I),c(this,F),c(this,M),c(this,C),c(this,z),c(this,x),c(this,_),c(this,q),c(this,E),c(this,W),a(this,"use strict",void 0),s(this,m,{writable:!0,value:void 0}),s(this,w,{writable:!0,value:!1}),s(this,v,{writable:!0,value:{}}),s(this,g,{writable:!0,value:!1}),s(this,b,{writable:!0,value:"powermail_form_error"}),s(this,y,{writable:!0,value:"powermail_fieldset_error"}),s(this,k,{writable:!0,value:"powermail_field_error"}),s(this,S,{writable:!0,value:"data-powermail-class-handler"}),s(this,A,{writable:!0,value:"powermail-errors-list"}),s(this,L,{writable:!0,value:{required:function(e){return o(l,z,fe).call(l,e)&&!1===o(l,j,Se).call(l,e)},email:function(e){return o(l,C,pe).call(l,e)&&!1===o(l,D,Ae).call(l,e)},url:function(e){return o(l,M,me).call(l,e)&&!1===o(l,R,We).call(l,e)},pattern:function(e){return o(l,F,we).call(l,e)&&!1===o(l,U,Ee).call(l,e)},number:function(e){return o(l,I,ve).call(l,e)&&!1===o(l,G,qe).call(l,e)},minimum:function(e){return o(l,T,ge).call(l,e)&&!1===o(l,V,Le).call(l,e)},maximum:function(e){return o(l,P,be).call(l,e)&&!1===o(l,H,_e).call(l,e)},length:function(e){return o(l,O,ye).call(l,e)&&!1===o(l,$,xe).call(l,e)},powermailfilesize:function(e){return o(l,N,ke).call(l,e)&&!1===o(l,B,ze).call(l,e)},powermailfileextensions:function(e){return o(l,N,ke).call(l,e)&&!1===o(l,J,Ce).call(l,e)}}}),n(this,m,i),r(this,m).powermailFormValidation=this}return i(t,[{key:"validate",value:function(){o(this,W,ue).call(this),o(this,E,se).call(this)}},{key:"addValidator",value:function(e,t){r(this,L)[e]=t}},{key:"setError",value:function(e,t){this.removeError(e,t),o(this,K,Me).call(this,t);var i=t.getAttribute("data-powermail-"+e+"-message")||t.getAttribute("data-powermail-error-message")||"Validation error";o(this,X,Ie).call(this,i,t)}},{key:"removeError",value:function(e,t){o(this,Q,Fe).call(this,t),o(this,Y,Te).call(this,t)}}]),t}();function ue(){var e=this;r(this,m).setAttribute("novalidate","novalidate"),r(this,m).addEventListener("submit",(function(t){(!1===r(e,g)||o(e,ae,De).call(e))&&t.preventDefault(),o(e,q,ce).call(e),!1===o(e,ae,De).call(e)&&r(e,m).requestSubmit()}))}function se(){var e=this;o(this,te,Ne).call(this).forEach((function(t){t.addEventListener("blur",(function(){o(e,_,he).call(e,t)})),t.addEventListener("change",(function(){o(e,_,he).call(e,t)}))}))}function ce(){for(var e=o(this,te,Ne).call(this),t=0;t<e.length;t++)o(this,_,he).call(this,e[t])}function he(e){var t=!1;for(var i in e=o(this,ie,je).call(this,e),r(this,L))!1!==r(this,L).hasOwnProperty(i)&&(t=o(this,x,de).call(this,i,r(this,L)[i],e,t));o(this,re,Re).call(this,e,t),o(this,ne,Ue).call(this),o(this,le,Ge).call(this,e),n(this,g,!0)}function de(e,t,i,a){return!0===a||((a=t(i))?this.setError(e,i):this.removeError(e,i)),a}function fe(e){return e.hasAttribute("required")||"true"===e.getAttribute("data-powermail-required")}function pe(e){return"email"===e.getAttribute("type")||"email"===e.getAttribute("data-powermail-type")}function me(e){return"url"===e.getAttribute("type")||"url"===e.getAttribute("data-powermail-type")}function we(e){return e.hasAttribute("pattern")||e.hasAttribute("data-powermail-pattern")}function ve(e){return"number"===e.getAttribute("type")||"integer"===e.getAttribute("data-powermail-type")}function ge(e){return e.hasAttribute("min")||e.hasAttribute("data-powermail-min")}function be(e){return e.hasAttribute("max")||e.hasAttribute("data-powermail-max")}function ye(e){return e.hasAttribute("data-powermail-length")}function ke(e){return"file"===e.getAttribute("type")}function Se(e){return""!==o(this,Z,Pe).call(this,e)}function Ae(e){if(""===e.value)return!0;return new RegExp(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,"").test(o(this,Z,Pe).call(this,e))}function We(e){if(""===e.value)return!0;return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","").test(o(this,Z,Pe).call(this,e))}function Ee(e){if(""===e.value)return!0;var t=e.getAttribute("data-powermail-pattern")||e.getAttribute("pattern");return new RegExp(t,"").test(o(this,Z,Pe).call(this,e))}function qe(e){return""===e.value||!1===isNaN(e.value)}function Le(e){if(""===e.value)return!0;var t=e.getAttribute("min")||e.getAttribute("data-powermail-min");return parseInt(e.value)>=parseInt(t)}function _e(e){if(""===e.value)return!0;var t=e.getAttribute("max")||e.getAttribute("data-powermail-max");return parseInt(e.value)<=parseInt(t)}function xe(e){if(""===e.value)return!0;var t=e.getAttribute("data-powermail-length").replace("[","").replace("]","").split(","),i=t[0].trim(),a=t[1].trim();return parseInt(e.value.length)>=parseInt(i)&&parseInt(e.value.length)<=parseInt(a)}function ze(e){if(""===e.value)return!0;var t=h.getLargestFileSize(e),i=e.getAttribute("data-powermail-powermailfilesize").split(",");return t<=parseInt(i[0])}function Ce(e){return""===e.value||h.isFileExtensionInList(h.getExtensionFromFileName(e.value),e.getAttribute("accept"))}function Me(e){if(e.getAttribute(r(this,S)))for(var t=document.querySelectorAll(e.getAttribute(r(this,S))),i=0;i<t.length;i++)t[i].classList.add(r(this,k));else e.classList.add(r(this,k))}function Fe(e){if(e.getAttribute(r(this,S)))for(var t=document.querySelectorAll(e.getAttribute(r(this,S))),i=0;i<t.length;i++)t[i].classList.remove(r(this,k));else e.classList.remove(r(this,k))}function Ie(e,t){var i=document.createElement("ul");i.classList.add(r(this,A)),i.classList.add("filled"),i.setAttribute("data-powermail-error",o(this,ee,Oe).call(this,t));var a=document.createElement("li");i.appendChild(a);var n=document.createTextNode(e);if(a.appendChild(n),null!==t.getAttribute("data-powermail-errors-container")){var l=document.querySelector(t.getAttribute("data-powermail-errors-container"));null!==l&&l.appendChild(i)}else t.parentNode.appendChild(i)}function Te(e){var t=document.querySelector('[data-powermail-error="'+o(this,ee,Oe).call(this,e)+'"]');null!==t&&t.remove()}function Pe(e){var t=e.value;if("radio"===e.getAttribute("type")||"checkbox"===e.getAttribute("type")){t="";var i=e.getAttribute("name"),a=e.closest("form").querySelector('input[name="'+i+'"]:checked');null!==a&&(t=a.value)}return t}function Oe(e){return e.getAttribute("name").replace(/[^\w\s]/gi,"")}function Ne(){return r(this,m).querySelectorAll('input:not([data-powermail-validation="disabled"]):not([type="hidden"]):not([type="submit"]), textarea:not([data-powermail-validation="disabled"]), select:not([data-powermail-validation="disabled"])')}function je(e){if("radio"===e.getAttribute("type")||"checkbox"===e.getAttribute("type")){var t=e.getAttribute("name"),i=e.closest("form");e=i.querySelectorAll('[name="'+t+'"]')[0]}return e}function De(){return r(this,w)}function Re(e,t){r(this,v)[e.getAttribute("name")]=t}function Ue(){var e=!1;for(var t in r(this,v))!1!==r(this,v).hasOwnProperty(t)&&!0===r(this,v)[t]&&(e=!0);n(this,w,e)}function Ge(e){var t=e.closest("fieldset.powermail_fieldset");o(this,ae,De).call(this)?(r(this,m).classList.add(r(this,b)),null!==t&&t.classList.add(r(this,y))):(r(this,m).classList.remove(r(this,b)),null!==t&&t.classList.remove(r(this,y)))}var Ve=new WeakSet,He=new WeakSet,$e=new WeakSet,Be=new WeakSet,Je=new WeakSet,Ke=new WeakSet,Qe=new WeakSet,Xe=new WeakSet,Ye=new WeakSet,Ze=new WeakSet,et=new WeakSet,tt=new WeakSet;function it(){(new p).validate()}function at(){(new d).initialize()}function rt(){var e=this;document.querySelectorAll("form[data-powermail-ajax]").forEach((function(t){t.addEventListener("submit",(function(i){if(i.preventDefault(),!1===t.classList.contains("powermail_form_error")){var a=t.getAttribute("action"),r=t.getAttribute("data-powermail-form"),n=t.getAttribute("data-powermail-ajax-uri");o(e,Je,lt).call(e,t),fetch(a,{body:new FormData(t),method:"post"}).then((function(e){return e.text()})).then((function(i){var a=(new DOMParser).parseFromString(i,"text/html").documentElement.querySelector('[data-powermail-form="'+r+'"]');if(null!==a){var l=document.querySelector('[data-powermail-form="'+r+'"]').closest(".tx-powermail");l.innerHTML="",l.appendChild(a)}else null!==n?h.redirectToUri(n):t.submit();o(e,$e,rt).call(e),o(e,Ve,it).call(e),o(e,He,at).call(e),o(e,Ye,ct).call(e)})).catch((function(e){console.log(e)}))}}))}))}function nt(){null!==document.querySelector('[data-powermail-location="prefill"]')&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,i=e.coords.longitude,a=document.querySelector("[data-powermail-eidurl]").getAttribute("data-powermail-eidurl");fetch(a+"?eID=powermailEidGetLocation&lat="+t+"&lng="+i).then((function(e){return e.text()})).then((function(e){for(var t=document.querySelectorAll('[data-powermail-location="prefill"]'),i=0;i<t.length;i++)t[i].value=e})).catch((function(e){console.log(e)}))}))}function lt(e){o(this,Ke,ot).call(this,e);var t=e.querySelector(".powermail_submit");if(null!==t)t.parentNode.appendChild(o(this,Qe,ut).call(this));else{var i=e.closest(".tx-powermail");null!==i&&i.appendChild(o(this,Qe,ut).call(this))}}function ot(e){var t=e.closest(".tx-powermail");if(null!==t){var i=t.querySelector(".powermail_progressbar");null!==i&&i.remove()}}function ut(){var e=document.createElement("div");e.classList.add("powermail_progressbar");var t=document.createElement("div");t.classList.add("powermail_progress");var i=document.createElement("div");return i.classList.add("powermail_progress_inner"),e.appendChild(t),t.appendChild(i),e}function st(){for(var e=document.querySelectorAll(".powermail_all_type_password.powermail_all_value"),t=0;t<e.length;t++)e[t].innerText="********"}function ct(){document.querySelectorAll("img.powermail_captchaimage").forEach((function(e){var t=h.getUriWithoutGetParam(e.getAttribute("src"));e.setAttribute("src",t+"?hash="+h.getRandomString(5))}))}function ht(){var e=this;document.querySelectorAll(".deleteAllFiles").forEach((function(t){var i=t.closest(".powermail_fieldwrap_file");if(null!==i){var a=i.querySelector('input[type="file"]');o(e,et,dt).call(e,a)}t.addEventListener("click",(function(){var i=t.closest(".powermail_fieldwrap_file");if(null!==i){var a=i.querySelector('input[type="hidden"]');o(e,tt,ft).call(e,a)}var r=t.closest("ul");null!==r&&r.remove()}))}))}function dt(e){e.prop("disabled","disabled").addClass("hide").prop("type","hidden")}function ft(e){e.prop("disabled",!1).removeClass("hide").prop("type","file")}(new(i((function t(){e(this,t),c(this,tt),c(this,et),c(this,Ze),c(this,Ye),c(this,Xe),c(this,Qe),c(this,Ke),c(this,Je),c(this,Be),c(this,$e),c(this,He),c(this,Ve),a(this,"use strict",void 0),a(this,"initialize",(function(){var e=this;o(e,Ve,it).call(e),o(e,He,at).call(e),o(e,$e,rt).call(e),o(e,Be,nt).call(e),o(e,Xe,st).call(e),o(e,Ze,ht).call(e)}))})))).initialize()}();
