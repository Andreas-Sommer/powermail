!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,l(e,t,"get"))}function n(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,l(e,t,"set"),r),r}function l(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function o(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function u(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(e,t,r){u(e,t),t.set(e,r)}function c(e,t){u(e,t),t.add(e)}var h=function(){function t(){e(this,t)}return r(t,null,[{key:"getLargestFileSize",value:function(e){for(var t=0,r=0;r<e.files.length;r++){var i=e.files[r];i.size>t&&(t=i.size)}return t}},{key:"isFileExtensionInList",value:function(e,t){return-1!==t.indexOf("."+e)}},{key:"getExtensionFromFileName",value:function(e){return e.split(".").pop().toLowerCase()}},{key:"getUriWithoutGetParam",value:function(e){return e.split("?")[0]}},{key:"getRandomString",value:function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}},{key:"redirectToUri",value:function(e){-1!==e.indexOf("http")?window.location=e:window.location.pathname=e}},{key:"hideElement",value:function(e){null!==e&&(e.style.display="none")}},{key:"showElement",value:function(e){null!==e&&(e.style.display="block")}}]),t}();function d(){var e="btn-primary";this.initialize=function(){i(),t()};var t=function(){for(var e=document.querySelectorAll("form.powermail_morestep"),t=0;t<e.length;t++)r(e[t])},r=function(e){a(0,e)},i=function(){for(var e=document.querySelectorAll("[data-powermail-morestep-show]"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target.getAttribute("data-powermail-morestep-show"),r=e.target.closest("form");a(t,r)}))},a=function(e,t){n(t);var r=u(t);c(r[e]),l(t)},n=function(e){for(var t=u(e),r=0;r<t.length;r++)s(t[r])},l=function(t){for(var r=t.querySelectorAll("[data-powermail-morestep-current]"),i=o(t),a=0;a<r.length;a++)r[a].classList.remove(e),a===i&&r[a].classList.add(e)},o=function(e){for(var t=u(e),r=0;r<t.length;r++)if("none"!==t[r].style.display)return r},u=function(e){return e.querySelectorAll(".powermail_fieldset")},s=function(e){e.style.display="none"},c=function(e){e.style.display="block"}}var f=new WeakMap,p=function(){function t(){e(this,t),s(this,f,{writable:!0,value:"[data-powermail-validate]"})}return r(t,[{key:"validate",value:function(){document.querySelectorAll(a(this,f)).forEach((function(e){(e=new le(e)).validate()}))}}]),t}(),m=new WeakMap,w=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,k=new WeakMap,S=new WeakMap,A=new WeakMap,W=new WeakSet,E=new WeakSet,x=new WeakSet,q=new WeakMap,L=new WeakSet,_=new WeakSet,z=new WeakSet,C=new WeakSet,M=new WeakSet,F=new WeakSet,I=new WeakSet,T=new WeakSet,P=new WeakSet,O=new WeakSet,N=new WeakSet,j=new WeakSet,D=new WeakSet,R=new WeakSet,U=new WeakSet,G=new WeakSet,V=new WeakSet,H=new WeakSet,$=new WeakSet,B=new WeakSet,J=new WeakSet,K=new WeakSet,Q=new WeakSet,X=new WeakSet,Y=new WeakSet,Z=new WeakSet,ee=new WeakSet,te=new WeakSet,re=new WeakSet,ie=new WeakSet,ae=new WeakSet,ne=new WeakSet,le=function(){function t(r){var l=this;e(this,t),c(this,ne),c(this,ae),c(this,ie),c(this,re),c(this,te),c(this,ee),c(this,Z),c(this,Y),c(this,X),c(this,Q),c(this,K),c(this,J),c(this,B),c(this,$),c(this,H),c(this,V),c(this,G),c(this,U),c(this,R),c(this,D),c(this,j),c(this,N),c(this,O),c(this,P),c(this,T),c(this,I),c(this,F),c(this,M),c(this,C),c(this,z),c(this,_),c(this,L),c(this,x),c(this,E),c(this,W),i(this,"use strict",void 0),s(this,m,{writable:!0,value:void 0}),s(this,w,{writable:!0,value:!1}),s(this,v,{writable:!0,value:{}}),s(this,g,{writable:!0,value:!1}),s(this,b,{writable:!0,value:"powermail_form_error"}),s(this,y,{writable:!0,value:"powermail_fieldset_error"}),s(this,k,{writable:!0,value:"powermail_field_error"}),s(this,S,{writable:!0,value:"data-powermail-class-handler"}),s(this,A,{writable:!0,value:"powermail-errors-list"}),s(this,q,{writable:!0,value:{required:function(e,t){return!1===t&&(o(l,_,he).call(l,e)&&!1===o(l,N,ye).call(l,e)?(l.setError("required",e),t=!0):l.removeError("required",e)),t},email:function(e,t){return!1===t&&(o(l,z,de).call(l,e)&&!1===o(l,j,ke).call(l,e)?(l.setError("email",e),t=!0):l.removeError("email",e)),t},url:function(e,t){return!1===t&&(o(l,C,fe).call(l,e)&&!1===o(l,D,Se).call(l,e)?(l.setError("url",e),t=!0):l.removeError("url",e)),t},pattern:function(e,t){return!1===t&&(o(l,M,pe).call(l,e)&&!1===o(l,R,Ae).call(l,e)?(l.setError("pattern",e),t=!0):l.removeError("pattern",e)),t},number:function(e,t){return!1===t&&(o(l,F,me).call(l,e)&&!1===o(l,U,We).call(l,e)?(l.setError("number",e),t=!0):l.removeError("number",e)),t},minimum:function(e,t){return!1===t&&(o(l,I,we).call(l,e)&&!1===o(l,G,Ee).call(l,e)?(l.setError("min",e),t=!0):l.removeError("min",e)),t},maximum:function(e,t){return!1===t&&(o(l,T,ve).call(l,e)&&!1===o(l,V,xe).call(l,e)?(l.setError("max",e),t=!0):l.removeError("max",e)),t},length:function(e,t){return!1===t&&(o(l,P,ge).call(l,e)&&!1===o(l,H,qe).call(l,e)?(l.setError("length",e),t=!0):l.removeError("length",e)),t},uploadSize:function(e,t){return!1===t&&(o(l,O,be).call(l,e)&&!1===o(l,$,Le).call(l,e)?(l.setError("powermailfilesize",e),t=!0):l.removeError("powermailfilesize",e)),t},uploadExtensions:function(e,t){return!1===t&&(o(l,O,be).call(l,e)&&!1===o(l,B,_e).call(l,e)?(l.setError("powermailfileextensions",e),t=!0):l.removeError("powermailfileextensions",e)),t}}}),n(this,m,r),a(this,m).powermailFormValidation=this}return r(t,[{key:"validate",value:function(){o(this,W,oe).call(this),o(this,E,ue).call(this)}},{key:"addValidator",value:function(e,t){a(this,q)[e]=t}},{key:"setError",value:function(e,t){this.removeError(e,t),o(this,J,ze).call(this,t);var r=t.getAttribute("data-powermail-"+e+"-message")||t.getAttribute("data-powermail-error-message")||"Validation error";o(this,Q,Me).call(this,r,t)}},{key:"removeError",value:function(e,t){o(this,K,Ce).call(this,t),o(this,X,Fe).call(this,t)}}]),t}();function oe(){var e=this;a(this,m).setAttribute("novalidate","novalidate"),a(this,m).addEventListener("submit",(function(t){(!1===a(e,g)||o(e,re,Ne).call(e))&&t.preventDefault(),o(e,x,se).call(e),!1===o(e,re,Ne).call(e)&&a(e,m).requestSubmit()}))}function ue(){var e=this;o(this,ee,Pe).call(this).forEach((function(t){t.addEventListener("blur",(function(){o(e,L,ce).call(e,t)})),t.addEventListener("change",(function(){o(e,L,ce).call(e,t)}))}))}function se(){for(var e=o(this,ee,Pe).call(this),t=0;t<e.length;t++)o(this,L,ce).call(this,e[t])}function ce(e){var t=!1;for(var r in e=o(this,te,Oe).call(this,e),a(this,q))!1!==a(this,q).hasOwnProperty(r)&&(t=a(this,q)[r](e,t));o(this,ie,je).call(this,e,t),o(this,ae,De).call(this),o(this,ne,Re).call(this,e),n(this,g,!0)}function he(e){return e.hasAttribute("required")||"true"===e.getAttribute("data-powermail-required")}function de(e){return"email"===e.getAttribute("type")||"email"===e.getAttribute("data-powermail-type")}function fe(e){return"url"===e.getAttribute("type")||"url"===e.getAttribute("data-powermail-type")}function pe(e){return e.hasAttribute("pattern")||e.hasAttribute("data-powermail-pattern")}function me(e){return"number"===e.getAttribute("type")||"integer"===e.getAttribute("data-powermail-type")}function we(e){return e.hasAttribute("min")||e.hasAttribute("data-powermail-min")}function ve(e){return e.hasAttribute("max")||e.hasAttribute("data-powermail-max")}function ge(e){return e.hasAttribute("data-powermail-length")}function be(e){return"file"===e.getAttribute("type")}function ye(e){return""!==o(this,Y,Ie).call(this,e)}function ke(e){if(""===e.value)return!0;return new RegExp(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,"").test(o(this,Y,Ie).call(this,e))}function Se(e){if(""===e.value)return!0;return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","").test(o(this,Y,Ie).call(this,e))}function Ae(e){if(""===e.value)return!0;var t=e.getAttribute("data-powermail-pattern")||e.getAttribute("pattern");return new RegExp(t,"").test(o(this,Y,Ie).call(this,e))}function We(e){return""===e.value||!1===isNaN(e.value)}function Ee(e){if(""===e.value)return!0;var t=e.getAttribute("min")||e.getAttribute("data-powermail-min");return parseInt(e.value)>=parseInt(t)}function xe(e){if(""===e.value)return!0;var t=e.getAttribute("max")||e.getAttribute("data-powermail-max");return parseInt(e.value)<=parseInt(t)}function qe(e){if(""===e.value)return!0;var t=e.getAttribute("data-powermail-length").replace("[","").replace("]","").split(","),r=t[0].trim(),i=t[1].trim();return parseInt(e.value.length)>=parseInt(r)&&parseInt(e.value.length)<=parseInt(i)}function Le(e){if(""===e.value)return!0;var t=h.getLargestFileSize(e),r=e.getAttribute("data-powermail-powermailfilesize").split(",");return t<=parseInt(r[0])}function _e(e){return""===e.value||h.isFileExtensionInList(h.getExtensionFromFileName(e.value),e.getAttribute("accept"))}function ze(e){if(e.getAttribute(a(this,S)))for(var t=document.querySelectorAll(e.getAttribute(a(this,S))),r=0;r<t.length;r++)t[r].classList.add(a(this,k));else e.classList.add(a(this,k))}function Ce(e){if(e.getAttribute(a(this,S)))for(var t=document.querySelectorAll(e.getAttribute(a(this,S))),r=0;r<t.length;r++)t[r].classList.remove(a(this,k));else e.classList.remove(a(this,k))}function Me(e,t){var r=document.createElement("ul");r.classList.add(a(this,A)),r.classList.add("filled"),r.setAttribute("data-powermail-error",o(this,Z,Te).call(this,t));var i=document.createElement("li");r.appendChild(i);var n=document.createTextNode(e);if(i.appendChild(n),null!==t.getAttribute("data-powermail-errors-container")){var l=document.querySelector(t.getAttribute("data-powermail-errors-container"));null!==l&&l.appendChild(r)}else t.parentNode.appendChild(r)}function Fe(e){var t=document.querySelector('[data-powermail-error="'+o(this,Z,Te).call(this,e)+'"]');null!==t&&t.remove()}function Ie(e){var t=e.value;if("radio"===e.getAttribute("type")||"checkbox"===e.getAttribute("type")){t="";var r=e.getAttribute("name"),i=e.closest("form").querySelector('input[name="'+r+'"]:checked');null!==i&&(t=i.value)}return t}function Te(e){return e.getAttribute("name").replace(/[^\w\s]/gi,"")}function Pe(){return a(this,m).querySelectorAll('input:not([data-powermail-validation="disabled"]):not([type="hidden"]):not([type="submit"]), textarea:not([data-powermail-validation="disabled"]), select:not([data-powermail-validation="disabled"])')}function Oe(e){if("radio"===e.getAttribute("type")||"checkbox"===e.getAttribute("type")){var t=e.getAttribute("name"),r=e.closest("form");e=r.querySelectorAll('[name="'+t+'"]')[0]}return e}function Ne(){return a(this,w)}function je(e,t){a(this,v)[e.getAttribute("name")]=t}function De(){var e=!1;for(var t in a(this,v))!1!==a(this,v).hasOwnProperty(t)&&!0===a(this,v)[t]&&(e=!0);n(this,w,e)}function Re(e){var t=e.closest("fieldset.powermail_fieldset");o(this,re,Ne).call(this)?(a(this,m).classList.add(a(this,b)),null!==t&&t.classList.add(a(this,y))):(a(this,m).classList.remove(a(this,b)),null!==t&&t.classList.remove(a(this,y)))}var Ue=new WeakSet,Ge=new WeakSet,Ve=new WeakSet,He=new WeakSet,$e=new WeakSet,Be=new WeakSet,Je=new WeakSet,Ke=new WeakSet,Qe=new WeakSet,Xe=new WeakSet,Ye=new WeakSet,Ze=new WeakSet;function et(){(new p).validate()}function tt(){(new d).initialize()}function rt(){var e=this;document.querySelectorAll("form[data-powermail-ajax]").forEach((function(t){t.addEventListener("submit",(function(r){if(r.preventDefault(),!1===t.classList.contains("powermail_form_error")){var i=t.getAttribute("action"),a=t.getAttribute("data-powermail-form"),n=t.getAttribute("data-powermail-ajax-uri");o(e,$e,at).call(e,t),fetch(i,{body:new FormData(t),method:"post"}).then((function(e){return e.text()})).then((function(r){var i=(new DOMParser).parseFromString(r,"text/html").documentElement.querySelector('[data-powermail-form="'+a+'"]');if(null!==i){var l=document.querySelector('[data-powermail-form="'+a+'"]').closest(".tx-powermail");l.innerHTML="",l.appendChild(i)}else null!==n?h.redirectToUri(n):t.submit();o(e,Ve,rt).call(e),o(e,Ue,et).call(e),o(e,Ge,tt).call(e),o(e,Qe,ut).call(e)})).catch((function(e){console.log(e)}))}}))}))}function it(){null!==document.querySelector('[data-powermail-location="prefill"]')&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,r=e.coords.longitude,i=document.querySelector("[data-powermail-eidurl]").getAttribute("data-powermail-eidurl");fetch(i+"?eID=powermailEidGetLocation&lat="+t+"&lng="+r).then((function(e){return e.text()})).then((function(e){for(var t=document.querySelectorAll('[data-powermail-location="prefill"]'),r=0;r<t.length;r++)t[r].value=e})).catch((function(e){console.log(e)}))}))}function at(e){o(this,Be,nt).call(this,e);var t=e.querySelector(".powermail_submit");if(null!==t)t.parentNode.appendChild(o(this,Je,lt).call(this));else{var r=e.closest(".tx-powermail");null!==r&&r.appendChild(o(this,Je,lt).call(this))}}function nt(e){var t=e.closest(".tx-powermail");if(null!==t){var r=t.querySelector(".powermail_progressbar");null!==r&&r.remove()}}function lt(){var e=document.createElement("div");e.classList.add("powermail_progressbar");var t=document.createElement("div");t.classList.add("powermail_progress");var r=document.createElement("div");return r.classList.add("powermail_progress_inner"),e.appendChild(t),t.appendChild(r),e}function ot(){for(var e=document.querySelectorAll(".powermail_all_type_password.powermail_all_value"),t=0;t<e.length;t++)e[t].innerText="********"}function ut(){document.querySelectorAll("img.powermail_captchaimage").forEach((function(e){var t=h.getUriWithoutGetParam(e.getAttribute("src"));e.setAttribute("src",t+"?hash="+h.getRandomString(5))}))}function st(){var e=this;document.querySelectorAll(".deleteAllFiles").forEach((function(t){var r=t.closest(".powermail_fieldwrap_file");if(null!==r){var i=r.querySelector('input[type="file"]');o(e,Ye,ct).call(e,i)}t.addEventListener("click",(function(){var r=t.closest(".powermail_fieldwrap_file");if(null!==r){var i=r.querySelector('input[type="hidden"]');o(e,Ze,ht).call(e,i)}var a=t.closest("ul");null!==a&&a.remove()}))}))}function ct(e){e.prop("disabled","disabled").addClass("hide").prop("type","hidden")}function ht(e){e.prop("disabled",!1).removeClass("hide").prop("type","file")}(new(r((function t(){e(this,t),c(this,Ze),c(this,Ye),c(this,Xe),c(this,Qe),c(this,Ke),c(this,Je),c(this,Be),c(this,$e),c(this,He),c(this,Ve),c(this,Ge),c(this,Ue),i(this,"use strict",void 0),i(this,"initialize",(function(){var e=this;o(e,Ue,et).call(e),o(e,Ge,tt).call(e),o(e,Ve,rt).call(e),o(e,He,it).call(e),o(e,Ke,ot).call(e),o(e,Xe,st).call(e)}))})))).initialize()}();
