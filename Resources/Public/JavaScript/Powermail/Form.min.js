!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,l(e,t,"get"))}function r(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,l(e,t,"set"),i),i}function l(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function o(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function u(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(e,t,i){u(e,t),t.set(e,i)}function c(e,t){u(e,t),t.add(e)}var h=function(){function t(){e(this,t)}return i(t,null,[{key:"getLargestFileSize",value:function(e){for(var t=0,i=0;i<e.files.length;i++){var a=e.files[i];a.size>t&&(t=a.size)}return t}},{key:"isFileExtensionInList",value:function(e,t){return-1!==t.indexOf("."+e)}},{key:"getExtensionFromFileName",value:function(e){return e.split(".").pop().toLowerCase()}},{key:"getUriWithoutGetParam",value:function(e){return e.split("?")[0]}},{key:"getRandomString",value:function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}},{key:"redirectToUri",value:function(e){-1!==e.indexOf("http")?window.location=e:window.location.pathname=e}},{key:"hideElement",value:function(e){null!==e&&(e.style.display="none")}},{key:"showElement",value:function(e){null!==e&&(e.style.display="block")}}]),t}();function d(){var e="btn-primary";this.initialize=function(){a(),t()};var t=function(){for(var e=document.querySelectorAll("form.powermail_morestep"),t=0;t<e.length;t++)i(e[t])},i=function(e){n(0,e)},a=function(){for(var e=document.querySelectorAll("[data-powermail-morestep-show]"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target.getAttribute("data-powermail-morestep-show"),i=e.target.closest("form");n(t,i)}))},n=function(e,t){r(t);var i=u(t);c(i[e]),l(t)},r=function(e){for(var t=u(e),i=0;i<t.length;i++)s(t[i])},l=function(t){for(var i=t.querySelectorAll("[data-powermail-morestep-current]"),a=o(t),n=0;n<i.length;n++)i[n].classList.remove(e),n===a&&i[n].classList.add(e)},o=function(e){for(var t=u(e),i=0;i<t.length;i++)if("none"!==t[i].style.display)return i},u=function(e){return e.querySelectorAll(".powermail_fieldset")},s=function(e){e.style.display="none"},c=function(e){e.style.display="block"}}var f=new WeakMap,p=function(){function t(){e(this,t),s(this,f,{writable:!0,value:"[data-powermail-validate]"})}return i(t,[{key:"validate",value:function(){document.querySelectorAll(n(this,f)).forEach((function(e){(e=new oe(e)).validate()}))}}]),t}(),m=new WeakMap,w=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,S=new WeakMap,y=new WeakMap,k=new WeakMap,A=new WeakMap,W=new WeakSet,E=new WeakSet,x=new WeakSet,q=new WeakSet,L=new WeakSet,_=new WeakSet,z=new WeakSet,C=new WeakSet,M=new WeakSet,I=new WeakSet,F=new WeakSet,T=new WeakSet,P=new WeakSet,O=new WeakSet,N=new WeakSet,j=new WeakSet,D=new WeakSet,R=new WeakSet,U=new WeakSet,G=new WeakSet,H=new WeakSet,V=new WeakSet,$=new WeakSet,B=new WeakSet,J=new WeakSet,K=new WeakSet,Q=new WeakSet,X=new WeakSet,Y=new WeakSet,Z=new WeakSet,ee=new WeakSet,te=new WeakSet,ie=new WeakSet,ae=new WeakSet,ne=new WeakSet,re=new WeakSet,le=new WeakSet,oe=function(){function t(i){var n=this;e(this,t),c(this,le),c(this,re),c(this,ne),c(this,ae),c(this,ie),c(this,te),c(this,ee),c(this,Z),c(this,Y),c(this,X),c(this,Q),c(this,K),c(this,J),c(this,B),c(this,$),c(this,V),c(this,H),c(this,G),c(this,U),c(this,R),c(this,D),c(this,j),c(this,N),c(this,O),c(this,P),c(this,T),c(this,F),c(this,I),c(this,M),c(this,C),c(this,z),c(this,_),c(this,L),c(this,q),c(this,x),c(this,E),c(this,W),a(this,"use strict",void 0),s(this,m,{writable:!0,value:void 0}),s(this,w,{writable:!0,value:!1}),s(this,v,{writable:!0,value:{}}),s(this,g,{writable:!0,value:!1}),s(this,b,{writable:!0,value:"powermail_form_error"}),s(this,S,{writable:!0,value:"powermail_fieldset_error"}),s(this,y,{writable:!0,value:"powermail_field_error"}),s(this,k,{writable:!0,value:"data-powermail-class-handler"}),s(this,A,{writable:!0,value:"powermail-errors-list"}),a(this,"validators",{required:function(e,t){return!1===t&&(o(n,L,de).call(n,e)&&!1===o(n,O,ye).call(n,e)?(o(n,B,Ce).call(n,"required",e),t=!0):o(n,J,Me).call(n,"required",e)),t},email:function(e,t){return!1===t&&(o(n,_,fe).call(n,e)&&!1===o(n,N,ke).call(n,e)?(o(n,B,Ce).call(n,"email",e),t=!0):o(n,J,Me).call(n,"email",e)),t},url:function(e,t){return!1===t&&(o(n,z,pe).call(n,e)&&!1===o(n,j,Ae).call(n,e)?(o(n,B,Ce).call(n,"url",e),t=!0):o(n,J,Me).call(n,"url",e)),t},pattern:function(e,t){return!1===t&&(o(n,C,me).call(n,e)&&!1===o(n,D,We).call(n,e)?(o(n,B,Ce).call(n,"pattern",e),t=!0):o(n,J,Me).call(n,"pattern",e)),t},number:function(e,t){return!1===t&&(o(n,M,we).call(n,e)&&!1===o(n,R,Ee).call(n,e)?(o(n,B,Ce).call(n,"number",e),t=!0):o(n,J,Me).call(n,"number",e)),t},minimum:function(e,t){return!1===t&&(o(n,I,ve).call(n,e)&&!1===o(n,U,xe).call(n,e)?(o(n,B,Ce).call(n,"min",e),t=!0):o(n,J,Me).call(n,"min",e)),t},maximum:function(e,t){return!1===t&&(o(n,F,ge).call(n,e)&&!1===o(n,G,qe).call(n,e)?(o(n,B,Ce).call(n,"max",e),t=!0):o(n,J,Me).call(n,"max",e)),t},length:function(e,t){return!1===t&&(o(n,T,be).call(n,e)&&!1===o(n,H,Le).call(n,e)?(o(n,B,Ce).call(n,"length",e),t=!0):o(n,J,Me).call(n,"length",e)),t},uploadSize:function(e,t){return!1===t&&(o(n,P,Se).call(n,e)&&!1===o(n,V,_e).call(n,e)?(o(n,B,Ce).call(n,"powermailfilesize",e),t=!0):o(n,J,Me).call(n,"powermailfilesize",e)),t},uploadExtensions:function(e,t){return!1===t&&(o(n,P,Se).call(n,e)&&!1===o(n,$,ze).call(n,e)?(o(n,B,Ce).call(n,"powermailfileextensions",e),t=!0):o(n,J,Me).call(n,"powermailfileextensions",e)),t}}),r(this,m,i)}return i(t,[{key:"validate",value:function(){o(this,W,ue).call(this),o(this,E,se).call(this)}}]),t}();function ue(){var e=this;n(this,m).setAttribute("novalidate","novalidate"),n(this,m).addEventListener("submit",(function(t){(!1===n(e,g)||o(e,ae,Re).call(e))&&t.preventDefault(),o(e,x,ce).call(e),!1===o(e,ae,Re).call(e)&&n(e,m).requestSubmit()}))}function se(){var e=this;o(this,te,je).call(this).forEach((function(t){t.addEventListener("blur",(function(){o(e,q,he).call(e,t)})),t.addEventListener("change",(function(){o(e,q,he).call(e,t)}))}))}function ce(){for(var e=o(this,te,je).call(this),t=0;t<e.length;t++)o(this,q,he).call(this,e[t])}function he(e){var t=!1;for(var i in e=o(this,ie,De).call(this,e),this.validators)!1!==this.validators.hasOwnProperty(i)&&(t=this.validators[i](e,t));o(this,ne,Ue).call(this,e,t),o(this,re,Ge).call(this),o(this,le,He).call(this,e),r(this,g,!0)}function de(e){return e.hasAttribute("required")||"true"===e.getAttribute("data-powermail-required")}function fe(e){return"email"===e.getAttribute("type")||"email"===e.getAttribute("data-powermail-type")}function pe(e){return"url"===e.getAttribute("type")||"url"===e.getAttribute("data-powermail-type")}function me(e){return e.hasAttribute("pattern")||e.hasAttribute("data-powermail-pattern")}function we(e){return"number"===e.getAttribute("type")||"integer"===e.getAttribute("data-powermail-type")}function ve(e){return e.hasAttribute("min")||e.hasAttribute("data-powermail-min")}function ge(e){return e.hasAttribute("max")||e.hasAttribute("data-powermail-max")}function be(e){return e.hasAttribute("data-powermail-length")}function Se(e){return"file"===e.getAttribute("type")}function ye(e){return""!==o(this,Z,Oe).call(this,e)}function ke(e){if(""===e.value)return!0;return new RegExp(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,"").test(o(this,Z,Oe).call(this,e))}function Ae(e){if(""===e.value)return!0;return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","").test(o(this,Z,Oe).call(this,e))}function We(e){if(""===e.value)return!0;var t=e.getAttribute("data-powermail-pattern")||e.getAttribute("pattern");return new RegExp(t,"").test(o(this,Z,Oe).call(this,e))}function Ee(e){return""===e.value||!1===isNaN(e.value)}function xe(e){if(""===e.value)return!0;var t=e.getAttribute("min")||e.getAttribute("data-powermail-min");return parseInt(e.value)>=parseInt(t)}function qe(e){if(""===e.value)return!0;var t=e.getAttribute("max")||e.getAttribute("data-powermail-max");return parseInt(e.value)<=parseInt(t)}function Le(e){if(""===e.value)return!0;var t=e.getAttribute("data-powermail-length").replace("[","").replace("]","").split(","),i=t[0].trim(),a=t[1].trim();return parseInt(e.value.length)>=parseInt(i)&&parseInt(e.value.length)<=parseInt(a)}function _e(e){if(""===e.value)return!0;var t=h.getLargestFileSize(e),i=e.getAttribute("data-powermail-powermailfilesize").split(",");return t<=parseInt(i[0])}function ze(e){return""===e.value||h.isFileExtensionInList(h.getExtensionFromFileName(e.value),e.getAttribute("accept"))}function Ce(e,t){o(this,J,Me).call(this,e,t),o(this,K,Ie).call(this,t);var i=t.getAttribute("data-powermail-"+e+"-message")||t.getAttribute("data-powermail-error-message")||"Validation error";o(this,X,Te).call(this,i,t)}function Me(e,t){o(this,Q,Fe).call(this,t),o(this,Y,Pe).call(this,t)}function Ie(e){if(e.getAttribute(n(this,k)))for(var t=document.querySelectorAll(e.getAttribute(n(this,k))),i=0;i<t.length;i++)t[i].classList.add(n(this,y));else e.classList.add(n(this,y))}function Fe(e){if(e.getAttribute(n(this,k)))for(var t=document.querySelectorAll(e.getAttribute(n(this,k))),i=0;i<t.length;i++)t[i].classList.remove(n(this,y));else e.classList.remove(n(this,y))}function Te(e,t){var i=document.createElement("ul");i.classList.add(n(this,A)),i.classList.add("filled"),i.setAttribute("data-powermail-error",o(this,ee,Ne).call(this,t));var a=document.createElement("li");i.appendChild(a);var r=document.createTextNode(e);if(a.appendChild(r),null!==t.getAttribute("data-powermail-errors-container")){var l=document.querySelector(t.getAttribute("data-powermail-errors-container"));null!==l&&l.appendChild(i)}else t.parentNode.appendChild(i)}function Pe(e){var t=document.querySelector('[data-powermail-error="'+o(this,ee,Ne).call(this,e)+'"]');null!==t&&t.remove()}function Oe(e){var t=e.value;if("radio"===e.getAttribute("type")||"checkbox"===e.getAttribute("type")){t="";var i=e.getAttribute("name"),a=e.closest("form").querySelector('input[name="'+i+'"]:checked');null!==a&&(t=a.value)}return t}function Ne(e){return e.getAttribute("name").replace(/[^\w\s]/gi,"")}function je(){return n(this,m).querySelectorAll('input:not([data-powermail-validation="disabled"]):not([type="hidden"]):not([type="submit"]), textarea:not([data-powermail-validation="disabled"]), select:not([data-powermail-validation="disabled"])')}function De(e){if("radio"===e.getAttribute("type")||"checkbox"===e.getAttribute("type")){var t=e.getAttribute("name"),i=e.closest("form");e=i.querySelectorAll('[name="'+t+'"]')[0]}return e}function Re(){return n(this,w)}function Ue(e,t){n(this,v)[e.getAttribute("name")]=t}function Ge(){var e=!1;for(var t in n(this,v))!1!==n(this,v).hasOwnProperty(t)&&!0===n(this,v)[t]&&(e=!0);r(this,w,e)}function He(e){var t=e.closest("fieldset.powermail_fieldset");o(this,ae,Re).call(this)?(n(this,m).classList.add(n(this,b)),null!==t&&t.classList.add(n(this,S))):(n(this,m).classList.remove(n(this,b)),null!==t&&t.classList.remove(n(this,S)))}var Ve=new WeakSet,$e=new WeakSet,Be=new WeakSet,Je=new WeakSet,Ke=new WeakSet,Qe=new WeakSet,Xe=new WeakSet,Ye=new WeakSet,Ze=new WeakSet,et=new WeakSet,tt=new WeakSet,it=new WeakSet;function at(){(new p).validate()}function nt(){(new d).initialize()}function rt(){var e=this;document.querySelectorAll("form[data-powermail-ajax]").forEach((function(t){t.addEventListener("submit",(function(i){if(i.preventDefault(),!1===t.classList.contains("powermail_form_error")){var a=t.getAttribute("action"),n=t.getAttribute("data-powermail-form"),r=t.getAttribute("data-powermail-ajax-uri");o(e,Ke,ot).call(e,t),fetch(a,{body:new FormData(t),method:"post"}).then((function(e){return e.text()})).then((function(i){var a=(new DOMParser).parseFromString(i,"text/html").documentElement.querySelector('[data-powermail-form="'+n+'"]');if(null!==a){var l=document.querySelector('[data-powermail-form="'+n+'"]').closest(".tx-powermail");l.innerHTML="",l.appendChild(a)}else null!==r?h.redirectToUri(r):t.submit();o(e,Be,rt).call(e),o(e,Ve,at).call(e),o(e,$e,nt).call(e),o(e,Ze,ht).call(e)})).catch((function(e){console.log(e)}))}}))}))}function lt(){null!==document.querySelector('[data-powermail-location="prefill"]')&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,i=e.coords.longitude,a=document.querySelector("[data-powermail-eidurl]").getAttribute("data-powermail-eidurl");fetch(a+"?eID=powermailEidGetLocation&lat="+t+"&lng="+i).then((function(e){return e.text()})).then((function(e){for(var t=document.querySelectorAll('[data-powermail-location="prefill"]'),i=0;i<t.length;i++)t[i].value=e})).catch((function(e){console.log(e)}))}))}function ot(e){o(this,Qe,ut).call(this,e);var t=e.querySelector(".powermail_submit");if(null!==t)t.parentNode.appendChild(o(this,Xe,st).call(this));else{var i=e.closest(".tx-powermail");null!==i&&i.appendChild(o(this,Xe,st).call(this))}}function ut(e){var t=e.closest(".tx-powermail");if(null!==t){var i=t.querySelector(".powermail_progressbar");null!==i&&i.remove()}}function st(){var e=document.createElement("div");e.classList.add("powermail_progressbar");var t=document.createElement("div");t.classList.add("powermail_progress");var i=document.createElement("div");return i.classList.add("powermail_progress_inner"),e.appendChild(t),t.appendChild(i),e}function ct(){for(var e=document.querySelectorAll(".powermail_all_type_password.powermail_all_value"),t=0;t<e.length;t++)e[t].innerText="********"}function ht(){document.querySelectorAll("img.powermail_captchaimage").forEach((function(e){var t=h.getUriWithoutGetParam(e.getAttribute("src"));e.setAttribute("src",t+"?hash="+h.getRandomString(5))}))}function dt(){var e=this;document.querySelectorAll(".deleteAllFiles").forEach((function(t){var i=t.closest(".powermail_fieldwrap_file");if(null!==i){var a=i.querySelector('input[type="file"]');o(e,tt,ft).call(e,a)}t.addEventListener("click",(function(){var i=t.closest(".powermail_fieldwrap_file");if(null!==i){var a=i.querySelector('input[type="hidden"]');o(e,it,pt).call(e,a)}var n=t.closest("ul");null!==n&&n.remove()}))}))}function ft(e){e.prop("disabled","disabled").addClass("hide").prop("type","hidden")}function pt(e){e.prop("disabled",!1).removeClass("hide").prop("type","file")}(new(i((function t(){e(this,t),c(this,it),c(this,tt),c(this,et),c(this,Ze),c(this,Ye),c(this,Xe),c(this,Qe),c(this,Ke),c(this,Je),c(this,Be),c(this,$e),c(this,Ve),a(this,"use strict",void 0),a(this,"initialize",(function(){var e=this;o(e,Ve,at).call(e),o(e,$e,nt).call(e),o(e,Be,rt).call(e),o(e,Je,lt).call(e),o(e,Ye,ct).call(e),o(e,et,dt).call(e)}))})))).initialize()}();
