!function(){"use strict";function t(){var t="btn-primary";this.initialize=function(){n(),e()};var e=function(){for(var t=document.querySelectorAll("form.powermail_morestep"),e=0;e<t.length;e++)r(t[e])},r=function(t){a(0,t)},n=function(){for(var t=document.querySelectorAll("[data-powermail-morestep-show]"),e=0;e<t.length;e++)t[e].addEventListener("click",(function(t){var e=t.target.getAttribute("data-powermail-morestep-show"),r=t.target.closest("form");a(e,r)}))},a=function(t,e){i(e);var r=l(e);d(r[t]),u(e)},i=function(t){for(var e=l(t),r=0;r<e.length;r++)c(e[r])},u=function(e){for(var r=e.querySelectorAll("[data-powermail-morestep-current]"),n=o(e),a=0;a<r.length;a++)r[a].classList.remove(t),a===n&&r[a].classList.add(t)},o=function(t){for(var e=l(t),r=0;r<e.length;r++)if("none"!==e[r].style.display)return r},l=function(t){return t.querySelectorAll(".powermail_fieldset")},c=function(t){t.style.display="none"},d=function(t){t.style.display="block"}}function e(){var t="[data-powermail-validate]",e="parsley-error",r="data-powermail-class-handler";this.validate=function(){n(),a()};var n=function(){for(var e=document.querySelectorAll(t),r=function(t){var r=e[t];r.setAttribute("novalidate","novalidate"),r.addEventListener("submit",(function(r){r.preventDefault(),!1===i(e[t])&&alert("todo submit")}))},n=0;n<e.length;n++)r(n)},a=function(){for(var e=document.querySelectorAll(t),r=function(t){for(var r=V(e[t]),n=function(t){r[t].addEventListener("blur",(function(){u(r[t])})),r[t].addEventListener("change",(function(){u(r[t])}))},a=0;a<r.length;a++)n(a)},n=0;n<e.length;n++)r(n)},i=function(t){for(var e=!1,r=V(t),n=0;n<r.length;n++){var a=u(r[n]);!0===a&&(e=a)}return e},u=function(t){t=j(t);var e=!1;return e=o(t,e),e=l(t,e),e=c(t,e),e=d(t,e),e=s(t,e),e=f(t,e),e=m(t,e),e=p(t,e)},o=function(t,e){return!1===e&&(v(t)&&!1===S(t)?(_("required",t),e=!0):N("required",t)),e},l=function(t,e){return!1===e&&(g(t)&&!1===x(t)?(_("email",t),e=!0):N("email",t)),e},c=function(t,e){return!1===e&&(b(t)&&!1===L(t)?(_("url",t),e=!0):N("url",t)),e},d=function(t,e){return!1===e&&(A(t)&&!1===z(t)?(_("pattern",t),e=!0):N("pattern",t)),e},s=function(t,e){return!1===e&&(h(t)&&!1===E(t)?(_("number",t),e=!0):N("number",t)),e},f=function(t,e){return!1===e&&(w(t)&&!1===I(t)?(_("min",t),e=!0):N("min",t)),e},m=function(t,e){return!1===e&&(y(t)&&!1===k(t)?(_("max",t),e=!0):N("max",t)),e},p=function(t,e){return!1===e&&(q(t)&&!1===C(t)?(_("length",t),e=!0):N("length",t)),e},v=function(t){return t.hasAttribute("required")||"true"===t.getAttribute("data-powermail-required")},g=function(t){return"email"===t.getAttribute("type")||"email"===t.getAttribute("data-powermail-type")},b=function(t){return"url"===t.getAttribute("type")||"url"===t.getAttribute("data-powermail-type")},A=function(t){return t.hasAttribute("pattern")||t.hasAttribute("data-powermail-pattern")},h=function(t){return"number"===t.getAttribute("type")||"integer"===t.getAttribute("data-powermail-type")},w=function(t){return t.hasAttribute("min")||t.hasAttribute("data-powermail-min")},y=function(t){return t.hasAttribute("max")||t.hasAttribute("data-powermail-max")},q=function(t){return t.hasAttribute("data-powermail-length")},S=function(t){return""!==P(t)},x=function(t){if(""===t.value)return!0;return new RegExp(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,"").test(P(t))},L=function(t){if(""===t.value)return!0;return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","").test(P(t))},z=function(t){if(""===t.value)return!0;var e=t.getAttribute("data-powermail-pattern")||t.getAttribute("pattern");return new RegExp(e,"").test(P(t))},E=function(t){return""===t.value||!1===isNaN(t.value)},I=function(t){if(""===t.value)return!0;var e=t.getAttribute("min")||t.getAttribute("data-powermail-min");return parseInt(t.value)>=parseInt(e)},k=function(t){if(""===t.value)return!0;var e=t.getAttribute("max")||t.getAttribute("data-powermail-max");return parseInt(t.value)<=parseInt(e)},C=function(t){if(""===t.value)return!0;var e=t.getAttribute("data-powermail-length").replace("[","").replace("]","").split(","),r=e[0].trim(),n=e[1].trim();return parseInt(t.value.length)>=parseInt(r)&&parseInt(t.value.length)<=parseInt(n)},_=function(t,e){N(t,e),R(e);var r=e.getAttribute("data-powermail-"+t+"-message")||e.getAttribute("data-powermail-error-message")||"Validation error";$(r,e)},N=function(t,e){D(e),G(e)},R=function(t){if(t.getAttribute(r))for(var n=document.querySelectorAll(t.getAttribute(r)),a=0;a<n.length;a++)n[a].classList.add(e);else t.classList.add(e)},D=function(t){if(t.getAttribute(r))for(var n=document.querySelectorAll(t.getAttribute(r)),a=0;a<n.length;a++)n[a].classList.remove(e);else t.classList.remove(e)},$=function(t,e){var r=document.createElement("ul");r.classList.add("parsley-errors-list"),r.classList.add("filled"),r.setAttribute("data-powermail-error",T(e));var n=document.createElement("li");n.classList.add("parsley-required"),r.appendChild(n);var a=document.createTextNode(t);if(n.appendChild(a),null!==e.getAttribute("data-powermail-errors-container")){var i=document.querySelector(e.getAttribute("data-powermail-errors-container"));null!==i&&i.appendChild(r)}else e.parentNode.appendChild(r)},G=function(t){var e=document.querySelector('[data-powermail-error="'+T(t)+'"]');null!==e&&e.remove()},P=function(t){var e=t.value;if("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")){e="";var r=t.getAttribute("name"),n=t.closest("form").querySelector('input[name="'+r+'"]:checked');null!==n&&(e=n.value)}return e},T=function(t){return t.getAttribute("name").replace(/[^\w\s]/gi,"")},V=function(t){return t.querySelectorAll('input:not([data-powermail-validation="disabled"]):not([type="hidden"]):not([type="submit"]), textarea:not([data-powermail-validation="disabled"]), select:not([data-powermail-validation="disabled"])')},j=function(t){if("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")){var e=t.getAttribute("name"),r=t.closest("form");t=r.querySelectorAll('[name="'+e+'"]')[0]}return t}}(new function(){this.initialize=function(){r(),n(),a()};var r=function(){(new e).validate()},n=function(){(new t).initialize()},a=function(){null!==document.querySelector('[data-powermail-location="prefill"]')&&navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.latitude,r=t.coords.longitude,n=document.querySelector("[data-powermail-eidurl]").getAttribute("data-powermail-eidurl");fetch(n+"?eID=powermailEidGetLocation&lat="+e+"&lng="+r).then((function(t){return t.text()})).then((function(t){for(var e=document.querySelectorAll('[data-powermail-location="prefill"]'),r=0;r<e.length;r++)e[r].value=t})).catch((function(t){console.log(t)}))}))}}).initialize()}();
