!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,l(t,e,"get"))}function r(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,l(t,e,"set"),i),i}function l(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function o(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function u(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(t,e,i){u(t,e),e.set(t,i)}function c(t,e){u(t,e),e.add(t)}var h=function(){function e(){t(this,e)}return i(e,null,[{key:"getLargestFileSize",value:function(t){for(var e=0,i=0;i<t.files.length;i++){var a=t.files[i];a.size>e&&(e=a.size)}return e}},{key:"isFileExtensionInList",value:function(t,e){return-1!==e.indexOf("."+t)}},{key:"getExtensionFromFileName",value:function(t){return t.split(".").pop().toLowerCase()}},{key:"getUriWithoutGetParam",value:function(t){return t.split("?")[0]}},{key:"getRandomString",value:function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}},{key:"redirectToUri",value:function(t){-1!==t.indexOf("http")?window.location=t:window.location.pathname=t}},{key:"hideElement",value:function(t){null!==t&&(t.style.display="none")}},{key:"showElement",value:function(t){null!==t&&(t.style.display="block")}}]),e}();function d(){var t="btn-primary";this.initialize=function(){a(),e()};var e=function(){for(var t=document.querySelectorAll("form.powermail_morestep"),e=0;e<t.length;e++)i(t[e])},i=function(t){n(0,t)},a=function(){for(var t=document.querySelectorAll("[data-powermail-morestep-show]"),e=0;e<t.length;e++)t[e].addEventListener("click",(function(t){var e=t.target.getAttribute("data-powermail-morestep-show"),i=t.target.closest("form");n(e,i)}))},n=function(t,e){r(e);var i=u(e);c(i[t]),l(e)},r=function(t){for(var e=u(t),i=0;i<e.length;i++)s(e[i])},l=function(e){for(var i=e.querySelectorAll("[data-powermail-morestep-current]"),a=o(e),n=0;n<i.length;n++)i[n].classList.remove(t),n===a&&i[n].classList.add(t)},o=function(t){for(var e=u(t),i=0;i<e.length;i++)if("none"!==e[i].style.display)return i},u=function(t){return t.querySelectorAll(".powermail_fieldset")},s=function(t){t.style.display="none"},c=function(t){t.style.display="block"}}var f=new WeakMap,p=function(){function e(){t(this,e),s(this,f,{writable:!0,value:"[data-powermail-validate]"})}return i(e,[{key:"validate",value:function(){document.querySelectorAll(n(this,f)).forEach((function(t){(t=new ut(t)).validate()}))}}]),e}(),m=new WeakMap,w=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,S=new WeakMap,k=new WeakMap,A=new WeakSet,W=new WeakSet,E=new WeakSet,L=new WeakMap,_=new WeakSet,q=new WeakSet,x=new WeakSet,z=new WeakSet,C=new WeakSet,M=new WeakSet,F=new WeakSet,I=new WeakSet,T=new WeakSet,P=new WeakSet,O=new WeakSet,N=new WeakSet,j=new WeakSet,D=new WeakSet,R=new WeakSet,U=new WeakSet,G=new WeakSet,V=new WeakSet,H=new WeakSet,$=new WeakSet,B=new WeakSet,J=new WeakSet,K=new WeakSet,Q=new WeakSet,X=new WeakSet,Y=new WeakSet,Z=new WeakSet,tt=new WeakSet,et=new WeakSet,it=new WeakSet,at=new WeakSet,nt=new WeakSet,rt=new WeakSet,lt=new WeakSet,ot=new WeakSet,ut=function(){function e(i){var l=this;t(this,e),c(this,ot),c(this,lt),c(this,rt),c(this,nt),c(this,at),c(this,it),c(this,et),c(this,tt),c(this,Z),c(this,Y),c(this,X),c(this,Q),c(this,K),c(this,J),c(this,B),c(this,$),c(this,H),c(this,V),c(this,G),c(this,U),c(this,R),c(this,D),c(this,j),c(this,N),c(this,O),c(this,P),c(this,T),c(this,I),c(this,F),c(this,M),c(this,C),c(this,z),c(this,x),c(this,q),c(this,_),c(this,E),c(this,W),c(this,A),a(this,"use strict",void 0),s(this,m,{writable:!0,value:void 0}),s(this,w,{writable:!0,value:!1}),s(this,v,{writable:!0,value:{}}),s(this,g,{writable:!0,value:"powermail_form_error"}),s(this,b,{writable:!0,value:"powermail_fieldset_error"}),s(this,y,{writable:!0,value:"powermail_field_error"}),s(this,S,{writable:!0,value:"data-powermail-class-handler"}),s(this,k,{writable:!0,value:"powermail-errors-list"}),s(this,L,{writable:!0,value:{required:function(t){return o(l,x,pt).call(l,t)&&!1===o(l,N,At).call(l,t)},email:function(t){return o(l,z,mt).call(l,t)&&!1===o(l,j,Wt).call(l,t)},url:function(t){return o(l,C,wt).call(l,t)&&!1===o(l,D,Et).call(l,t)},pattern:function(t){return o(l,M,vt).call(l,t)&&!1===o(l,R,Lt).call(l,t)},number:function(t){return o(l,F,gt).call(l,t)&&!1===o(l,U,_t).call(l,t)},minimum:function(t){return o(l,I,bt).call(l,t)&&!1===o(l,G,qt).call(l,t)},maximum:function(t){return o(l,T,yt).call(l,t)&&!1===o(l,V,xt).call(l,t)},length:function(t){return o(l,P,St).call(l,t)&&!1===o(l,H,zt).call(l,t)},powermailfilesize:function(t){return o(l,O,kt).call(l,t)&&!1===o(l,$,Ct).call(l,t)},powermailfileextensions:function(t){return o(l,O,kt).call(l,t)&&!1===o(l,B,Mt).call(l,t)}}}),r(this,m,i),n(this,m).powermailFormValidation=this}return i(e,[{key:"validate",value:function(){o(this,A,st).call(this),o(this,W,ct).call(this)}},{key:"addValidator",value:function(t,e){n(this,L)[t]=e}}]),e}();function st(){var t=this;n(this,m).setAttribute("novalidate","novalidate"),n(this,m).addEventListener("submit",(function(e){o(t,E,ht).call(t),!0===o(t,nt,Gt).call(t)&&e.preventDefault()}))}function ct(){var t=this;o(this,it,Rt).call(this).forEach((function(e){e.addEventListener("input",(function(){o(t,_,dt).call(t,e)})),e.addEventListener("blur",(function(){o(t,_,dt).call(t,e)})),e.addEventListener("change",(function(){o(t,_,dt).call(t,e)}))}))}function ht(){for(var t=o(this,it,Rt).call(this),e=0;e<t.length;e++)o(this,_,dt).call(this,t[e])}function dt(t){var e=!1;for(var i in t=o(this,at,Ut).call(this,t),n(this,L))!1!==n(this,L).hasOwnProperty(i)&&(e=o(this,q,ft).call(this,i,n(this,L)[i],t,e));o(this,rt,Vt).call(this,t,e),o(this,lt,Ht).call(this),o(this,ot,$t).call(this,t)}function ft(t,e,i,a){return!0===a||((a=e(i))?o(this,J,Ft).call(this,t,i):o(this,K,It).call(this,t,i)),a}function pt(t){return t.hasAttribute("required")||"true"===t.getAttribute("data-powermail-required")}function mt(t){return"email"===t.getAttribute("type")||"email"===t.getAttribute("data-powermail-type")}function wt(t){return"url"===t.getAttribute("type")||"url"===t.getAttribute("data-powermail-type")}function vt(t){return t.hasAttribute("pattern")||t.hasAttribute("data-powermail-pattern")}function gt(t){return"number"===t.getAttribute("type")||"integer"===t.getAttribute("data-powermail-type")}function bt(t){return t.hasAttribute("min")||t.hasAttribute("data-powermail-min")}function yt(t){return t.hasAttribute("max")||t.hasAttribute("data-powermail-max")}function St(t){return t.hasAttribute("data-powermail-length")}function kt(t){return"file"===t.getAttribute("type")}function At(t){return""!==o(this,tt,jt).call(this,t)}function Wt(t){if(""===t.value)return!0;return new RegExp(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,"").test(o(this,tt,jt).call(this,t))}function Et(t){if(""===t.value)return!0;return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","").test(o(this,tt,jt).call(this,t))}function Lt(t){if(""===t.value)return!0;var e=t.getAttribute("data-powermail-pattern")||t.getAttribute("pattern");return new RegExp(e,"").test(o(this,tt,jt).call(this,t))}function _t(t){return""===t.value||!1===isNaN(t.value)}function qt(t){if(""===t.value)return!0;var e=t.getAttribute("min")||t.getAttribute("data-powermail-min");return parseInt(t.value)>=parseInt(e)}function xt(t){if(""===t.value)return!0;var e=t.getAttribute("max")||t.getAttribute("data-powermail-max");return parseInt(t.value)<=parseInt(e)}function zt(t){if(""===t.value)return!0;var e=t.getAttribute("data-powermail-length").replace("[","").replace("]","").split(","),i=e[0].trim(),a=e[1].trim();return parseInt(t.value.length)>=parseInt(i)&&parseInt(t.value.length)<=parseInt(a)}function Ct(t){if(""===t.value)return!0;var e=h.getLargestFileSize(t),i=t.getAttribute("data-powermail-powermailfilesize").split(",");return e<=parseInt(i[0])}function Mt(t){return""===t.value||h.isFileExtensionInList(h.getExtensionFromFileName(t.value),t.getAttribute("accept"))}function Ft(t,e){o(this,K,It).call(this,t,e),o(this,Q,Tt).call(this,e);var i=e.getAttribute("data-powermail-"+t+"-message")||e.getAttribute("data-powermail-error-message")||"Validation error";o(this,Y,Ot).call(this,i,e)}function It(t,e){o(this,X,Pt).call(this,e),o(this,Z,Nt).call(this,e)}function Tt(t){if(t.getAttribute(n(this,S)))for(var e=document.querySelectorAll(t.getAttribute(n(this,S))),i=0;i<e.length;i++)e[i].classList.add(n(this,y));else t.classList.add(n(this,y))}function Pt(t){if(t.getAttribute(n(this,S)))for(var e=document.querySelectorAll(t.getAttribute(n(this,S))),i=0;i<e.length;i++)e[i].classList.remove(n(this,y));else t.classList.remove(n(this,y))}function Ot(t,e){var i=document.createElement("ul");i.classList.add(n(this,k)),i.classList.add("filled"),i.setAttribute("data-powermail-error",o(this,et,Dt).call(this,e));var a=document.createElement("li");i.appendChild(a);var r=document.createTextNode(t);if(a.appendChild(r),null!==e.getAttribute("data-powermail-errors-container")){var l=document.querySelector(e.getAttribute("data-powermail-errors-container"));null!==l&&l.appendChild(i)}else e.parentNode.appendChild(i)}function Nt(t){var e=document.querySelector('[data-powermail-error="'+o(this,et,Dt).call(this,t)+'"]');null!==e&&e.remove()}function jt(t){var e=t.value;if("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")){e="";var i=t.getAttribute("name"),a=t.closest("form").querySelector('input[name="'+i+'"]:checked');null!==a&&(e=a.value)}return e}function Dt(t){return t.getAttribute("name").replace(/[^\w\s]/gi,"")}function Rt(){return n(this,m).querySelectorAll('input:not([data-powermail-validation="disabled"]):not([type="hidden"]):not([type="submit"]), textarea:not([data-powermail-validation="disabled"]), select:not([data-powermail-validation="disabled"])')}function Ut(t){if("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")){var e=t.getAttribute("name"),i=t.closest("form");t=i.querySelectorAll('[name="'+e+'"]')[0]}return t}function Gt(){return n(this,w)}function Vt(t,e){n(this,v)[t.getAttribute("name")]=e}function Ht(){var t=!1;for(var e in n(this,v))!1!==n(this,v).hasOwnProperty(e)&&!0===n(this,v)[e]&&(t=!0);r(this,w,t)}function $t(t){var e=t.closest("fieldset.powermail_fieldset");o(this,nt,Gt).call(this)?(n(this,m).classList.add(n(this,g)),null!==e&&e.classList.add(n(this,b))):(n(this,m).classList.remove(n(this,g)),null!==e&&e.classList.remove(n(this,b)))}var Bt=new WeakSet,Jt=new WeakSet,Kt=new WeakSet,Qt=new WeakSet,Xt=new WeakSet,Yt=new WeakSet,Zt=new WeakSet,te=new WeakSet,ee=new WeakSet,ie=new WeakSet,ae=new WeakSet,ne=new WeakSet;function re(){(new p).validate()}function le(){(new d).initialize()}function oe(){var t=this;document.querySelectorAll("form[data-powermail-ajax]").forEach((function(e){e.addEventListener("submit",(function(i){if(i.preventDefault(),!1===e.classList.contains("powermail_form_error")){var a=e.getAttribute("action"),n=e.getAttribute("data-powermail-form"),r=e.getAttribute("data-powermail-ajax-uri");o(t,Xt,se).call(t,e),fetch(a,{body:new FormData(e),method:"post"}).then((function(t){return t.text()})).then((function(i){var a=(new DOMParser).parseFromString(i,"text/html").documentElement.querySelector('[data-powermail-form="'+n+'"]');if(null!==a){var l=document.querySelector('[data-powermail-form="'+n+'"]').closest(".tx-powermail");l.innerHTML="",l.appendChild(a)}else null!==r?h.redirectToUri(r):e.submit();o(t,Kt,oe).call(t),o(t,Bt,re).call(t),o(t,Jt,le).call(t),o(t,ee,fe).call(t)})).catch((function(t){console.log(t)}))}}))}))}function ue(){null!==document.querySelector('[data-powermail-location="prefill"]')&&navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.latitude,i=t.coords.longitude,a=document.querySelector("[data-powermail-eidurl]").getAttribute("data-powermail-eidurl");fetch(a+"?eID=powermailEidGetLocation&lat="+e+"&lng="+i).then((function(t){return t.text()})).then((function(t){for(var e=document.querySelectorAll('[data-powermail-location="prefill"]'),i=0;i<e.length;i++)e[i].value=t})).catch((function(t){console.log(t)}))}))}function se(t){o(this,Yt,ce).call(this,t);var e=t.querySelector(".powermail_submit");if(null!==e)e.parentNode.appendChild(o(this,Zt,he).call(this));else{var i=t.closest(".tx-powermail");null!==i&&i.appendChild(o(this,Zt,he).call(this))}}function ce(t){var e=t.closest(".tx-powermail");if(null!==e){var i=e.querySelector(".powermail_progressbar");null!==i&&i.remove()}}function he(){var t=document.createElement("div");t.classList.add("powermail_progressbar");var e=document.createElement("div");e.classList.add("powermail_progress");var i=document.createElement("div");return i.classList.add("powermail_progress_inner"),t.appendChild(e),e.appendChild(i),t}function de(){for(var t=document.querySelectorAll(".powermail_all_type_password.powermail_all_value"),e=0;e<t.length;e++)t[e].innerText="********"}function fe(){document.querySelectorAll("img.powermail_captchaimage").forEach((function(t){var e=h.getUriWithoutGetParam(t.getAttribute("src"));t.setAttribute("src",e+"?hash="+h.getRandomString(5))}))}function pe(){var t=this;document.querySelectorAll(".deleteAllFiles").forEach((function(e){var i=e.closest(".powermail_fieldwrap_file");if(null!==i){var a=i.querySelector('input[type="file"]');o(t,ae,me).call(t,a)}e.addEventListener("click",(function(){var i=e.closest(".powermail_fieldwrap_file");if(null!==i){var a=i.querySelector('input[type="hidden"]');o(t,ne,we).call(t,a)}var n=e.closest("ul");null!==n&&n.remove()}))}))}function me(t){t.prop("disabled","disabled").addClass("hide").prop("type","hidden")}function we(t){t.prop("disabled",!1).removeClass("hide").prop("type","file")}(new(i((function e(){t(this,e),c(this,ne),c(this,ae),c(this,ie),c(this,ee),c(this,te),c(this,Zt),c(this,Yt),c(this,Xt),c(this,Qt),c(this,Kt),c(this,Jt),c(this,Bt),a(this,"use strict",void 0),a(this,"initialize",(function(){var t=this;o(t,Bt,re).call(t),o(t,Jt,le).call(t),o(t,Kt,oe).call(t),o(t,Qt,ue).call(t),o(t,te,de).call(t),o(t,ie,pe).call(t)}))})))).initialize()}();
