!function(){"use strict";function t(){var t="btn-primary";this.initialize=function(){n(),e()};var e=function(){for(var t=document.querySelectorAll("form.powermail_morestep"),e=0;e<t.length;e++)r(t[e])},r=function(t){i(0,t)},n=function(){for(var t=document.querySelectorAll("[data-powermail-morestep-show]"),e=0;e<t.length;e++)t[e].addEventListener("click",(function(t){var e=t.target.getAttribute("data-powermail-morestep-show"),r=t.target.closest("form");i(e,r)}))},i=function(t,e){a(e);var r=l(e);f(r[t]),o(e)},a=function(t){for(var e=l(t),r=0;r<e.length;r++)c(e[r])},o=function(e){for(var r=e.querySelectorAll("[data-powermail-morestep-current]"),n=u(e),i=0;i<r.length;i++)r[i].classList.remove(t),i===n&&r[i].classList.add(t)},u=function(t){for(var e=l(t),r=0;r<e.length;r++)if("none"!==e[r].style.display)return r},l=function(t){return t.querySelectorAll(".powermail_fieldset")},c=function(t){t.style.display="none"},f=function(t){t.style.display="block"}}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=r((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));function a(){var t="[data-powermail-validate]",e="powermail_field_error",r="data-powermail-class-handler";this.validate=function(){n(),a()};var n=function(){for(var e=document.querySelectorAll(t),r=function(t){var r=e[t];r.setAttribute("novalidate","novalidate"),r.addEventListener("submit",(function(r){r.preventDefault(),!1===o(e[t])&&alert("todo submit")}))},n=0;n<e.length;n++)r(n)},a=function(){for(var e=document.querySelectorAll(t),r=function(t){for(var r=J(e[t]),n=function(t){r[t].addEventListener("blur",(function(){u(r[t])})),r[t].addEventListener("change",(function(){u(r[t])}))},i=0;i<r.length;i++)n(i)},n=0;n<e.length;n++)r(n)},o=function(t){for(var e=!1,r=J(t),n=0;n<r.length;n++){var i=u(r[n]);!0===i&&(e=i)}return e},u=function(t){t=K(t);var e=!1;return e=l(t,e),e=c(t,e),e=f(t,e),e=s(t,e),e=d(t,e),e=p(t,e),e=m(t,e),e=v(t,e),e=g(t,e),e=b(t,e)},l=function(t,e){return!1===e&&(w(t)&&!1===E(t)?(R("required",t),e=!0):T("required",t)),e},c=function(t,e){return!1===e&&(A(t)&&!1===I(t)?(R("email",t),e=!0):T("email",t)),e},f=function(t,e){return!1===e&&(h(t)&&!1===_(t)?(R("url",t),e=!0):T("url",t)),e},s=function(t,e){return!1===e&&(y(t)&&!1===F(t)?(R("pattern",t),e=!0):T("pattern",t)),e},d=function(t,e){return!1===e&&(x(t)&&!1===C(t)?(R("number",t),e=!0):T("number",t)),e},p=function(t,e){return!1===e&&(q(t)&&!1===k(t)?(R("min",t),e=!0):T("min",t)),e},m=function(t,e){return!1===e&&(S(t)&&!1===N(t)?(R("max",t),e=!0):T("max",t)),e},v=function(t,e){return!1===e&&(z(t)&&!1===O(t)?(R("length",t),e=!0):T("length",t)),e},g=function(t,e){return!1===e&&(L(t)&&!1===P(t)?(R("powermailfilesize",t),e=!0):T("powermailfilesize",t)),e},b=function(t,e){return!1===e&&(L(t)&&!1===j(t)?(R("powermailfileextensions",t),e=!0):T("powermailfileextensions",t)),e},w=function(t){return t.hasAttribute("required")||"true"===t.getAttribute("data-powermail-required")},A=function(t){return"email"===t.getAttribute("type")||"email"===t.getAttribute("data-powermail-type")},h=function(t){return"url"===t.getAttribute("type")||"url"===t.getAttribute("data-powermail-type")},y=function(t){return t.hasAttribute("pattern")||t.hasAttribute("data-powermail-pattern")},x=function(t){return"number"===t.getAttribute("type")||"integer"===t.getAttribute("data-powermail-type")},q=function(t){return t.hasAttribute("min")||t.hasAttribute("data-powermail-min")},S=function(t){return t.hasAttribute("max")||t.hasAttribute("data-powermail-max")},z=function(t){return t.hasAttribute("data-powermail-length")},L=function(t){return"file"===t.getAttribute("type")},E=function(t){return""!==B(t)},I=function(t){if(""===t.value)return!0;return new RegExp(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,"").test(B(t))},_=function(t){if(""===t.value)return!0;return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","").test(B(t))},F=function(t){if(""===t.value)return!0;var e=t.getAttribute("data-powermail-pattern")||t.getAttribute("pattern");return new RegExp(e,"").test(B(t))},C=function(t){return""===t.value||!1===isNaN(t.value)},k=function(t){if(""===t.value)return!0;var e=t.getAttribute("min")||t.getAttribute("data-powermail-min");return parseInt(t.value)>=parseInt(e)},N=function(t){if(""===t.value)return!0;var e=t.getAttribute("max")||t.getAttribute("data-powermail-max");return parseInt(t.value)<=parseInt(e)},O=function(t){if(""===t.value)return!0;var e=t.getAttribute("data-powermail-length").replace("[","").replace("]","").split(","),r=e[0].trim(),n=e[1].trim();return parseInt(t.value.length)>=parseInt(r)&&parseInt(t.value.length)<=parseInt(n)},P=function(t){if(""===t.value)return!0;var e=i.getLargestFileSize(t),r=t.getAttribute("data-powermail-powermailfilesize").split(",");return parseInt(e)<=parseInt(r[0])},j=function(t){return""===t.value||i.isFileExtensionInList(i.getExtensionFromFileName(t.value),t.getAttribute("accept"))},R=function(t,e){T(t,e),D(e);var r=e.getAttribute("data-powermail-"+t+"-message")||e.getAttribute("data-powermail-error-message")||"Validation error";G(r,e)},T=function(t,e){$(e),V(e)},D=function(t){if(t.getAttribute(r))for(var n=document.querySelectorAll(t.getAttribute(r)),i=0;i<n.length;i++)n[i].classList.add(e);else t.classList.add(e)},$=function(t){if(t.getAttribute(r))for(var n=document.querySelectorAll(t.getAttribute(r)),i=0;i<n.length;i++)n[i].classList.remove(e);else t.classList.remove(e)},G=function(t,e){var r=document.createElement("ul");r.classList.add("powermail-errors-list"),r.classList.add("filled"),r.setAttribute("data-powermail-error",H(e));var n=document.createElement("li");r.appendChild(n);var i=document.createTextNode(t);if(n.appendChild(i),null!==e.getAttribute("data-powermail-errors-container")){var a=document.querySelector(e.getAttribute("data-powermail-errors-container"));null!==a&&a.appendChild(r)}else e.parentNode.appendChild(r)},V=function(t){var e=document.querySelector('[data-powermail-error="'+H(t)+'"]');null!==e&&e.remove()},B=function(t){var e=t.value;if("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")){e="";var r=t.getAttribute("name"),n=t.closest("form").querySelector('input[name="'+r+'"]:checked');null!==n&&(e=n.value)}return e},H=function(t){return t.getAttribute("name").replace(/[^\w\s]/gi,"")},J=function(t){return t.querySelectorAll('input:not([data-powermail-validation="disabled"]):not([type="hidden"]):not([type="submit"]), textarea:not([data-powermail-validation="disabled"]), select:not([data-powermail-validation="disabled"])')},K=function(t){if("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")){var e=t.getAttribute("name"),r=t.closest("form");t=r.querySelectorAll('[name="'+e+'"]')[0]}return t}}n(i,"getLargestFileSize",(function(t){for(var e=0,r=0;r<t.files.length;r++){var n=t.files[r];n.size>e&&(e=n.size)}return e})),n(i,"isFileExtensionInList",(function(t,e){return-1!==e.indexOf("."+t)})),n(i,"getExtensionFromFileName",(function(t){return t.split(".").pop().toLowerCase()})),(new function(){this.initialize=function(){e(),r(),n(),i()};var e=function(){(new a).validate()},r=function(){(new t).initialize()},n=function(){null!==document.querySelector('[data-powermail-location="prefill"]')&&navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.latitude,r=t.coords.longitude,n=document.querySelector("[data-powermail-eidurl]").getAttribute("data-powermail-eidurl");fetch(n+"?eID=powermailEidGetLocation&lat="+e+"&lng="+r).then((function(t){return t.text()})).then((function(t){for(var e=document.querySelectorAll('[data-powermail-location="prefill"]'),r=0;r<e.length;r++)e[r].value=t})).catch((function(t){console.log(t)}))}))},i=function(){for(var t=document.querySelectorAll(".powermail_all_type_password.powermail_all_value"),e=0;e<t.length;e++)t[e].innerText="********"}}).initialize()}();
