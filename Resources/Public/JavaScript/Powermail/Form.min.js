!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,l(t,e,"get"))}function r(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,l(t,e,"set"),i),i}function l(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function s(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function o(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(t,e,i){o(t,e),e.set(t,i)}function c(t,e){o(t,e),e.add(t)}var h=function(){function e(){t(this,e)}return i(e,null,[{key:"redirectToUri",value:function(t){-1!==t.indexOf("http")?window.location=t:window.location.pathname=t}}]),e}();function f(){var t="btn-primary";this.initialize=function(){a(),e()};var e=function(){for(var t=document.querySelectorAll("form.powermail_morestep"),e=0;e<t.length;e++)i(t[e])},i=function(t){n(0,t)},a=function(){for(var t=document.querySelectorAll("[data-powermail-morestep-show]"),e=0;e<t.length;e++)t[e].addEventListener("click",(function(t){var e=t.target.getAttribute("data-powermail-morestep-show"),i=t.target.closest("form");n(e,i)}))},n=function(t,e){r(e);var i=o(e);c(i[t]),l(e)},r=function(t){for(var e=o(t),i=0;i<e.length;i++)u(e[i])},l=function(e){for(var i=e.querySelectorAll("[data-powermail-morestep-current]"),a=s(e),n=0;n<i.length;n++)i[n].classList.remove(t),n===a&&i[n].classList.add(t)},s=function(t){for(var e=o(t),i=0;i<e.length;i++)if("none"!==e[i].style.display)return i},o=function(t){return t.querySelectorAll(".powermail_fieldset")},u=function(t){t.style.display="none"},c=function(t){t.style.display="block"}}a(h,"getLargestFileSize",(function(t){for(var e=0,i=0;i<t.files.length;i++){var a=t.files[i];a.size>e&&(e=a.size)}return e})),a(h,"isFileExtensionInList",(function(t,e){return-1!==e.indexOf("."+t)})),a(h,"getExtensionFromFileName",(function(t){return t.split(".").pop().toLowerCase()})),a(h,"getUriWithoutGetParam",(function(t){return t.split("?")[0]})),a(h,"getRandomString",(function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}));var d=new WeakMap,p=function(){function e(){t(this,e),u(this,d,{writable:!0,value:"[data-powermail-validate]"})}return i(e,[{key:"validate",value:function(){document.querySelectorAll(n(this,d)).forEach((function(t){(t=new vt(t)).validate()}))}}]),e}(),w=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,S=new WeakMap,k=new WeakMap,W=new WeakMap,A=new WeakMap,y=new WeakSet,x=new WeakSet,E=new WeakSet,L=new WeakSet,q=new WeakSet,_=new WeakSet,z=new WeakSet,M=new WeakSet,C=new WeakSet,I=new WeakSet,F=new WeakSet,T=new WeakSet,P=new WeakSet,N=new WeakSet,O=new WeakSet,j=new WeakSet,D=new WeakSet,R=new WeakSet,U=new WeakSet,G=new WeakSet,H=new WeakSet,V=new WeakSet,$=new WeakSet,B=new WeakSet,J=new WeakSet,K=new WeakSet,Q=new WeakSet,X=new WeakSet,Y=new WeakSet,Z=new WeakSet,tt=new WeakSet,et=new WeakSet,it=new WeakSet,at=new WeakSet,nt=new WeakSet,rt=new WeakSet,lt=new WeakSet,st=new WeakSet,ot=new WeakSet,ut=new WeakSet,ct=new WeakSet,ht=new WeakSet,ft=new WeakSet,dt=new WeakSet,pt=new WeakSet,wt=new WeakSet,mt=new WeakSet,vt=function(){function e(i){t(this,e),c(this,mt),c(this,wt),c(this,pt),c(this,dt),c(this,ft),c(this,ht),c(this,ct),c(this,ut),c(this,ot),c(this,st),c(this,lt),c(this,rt),c(this,nt),c(this,at),c(this,it),c(this,et),c(this,tt),c(this,Z),c(this,Y),c(this,X),c(this,Q),c(this,K),c(this,J),c(this,B),c(this,$),c(this,V),c(this,H),c(this,G),c(this,U),c(this,R),c(this,D),c(this,j),c(this,O),c(this,N),c(this,P),c(this,T),c(this,F),c(this,I),c(this,C),c(this,M),c(this,z),c(this,_),c(this,q),c(this,L),c(this,E),c(this,x),c(this,y),a(this,"use strict",void 0),u(this,w,{writable:!0,value:void 0}),u(this,m,{writable:!0,value:!1}),u(this,v,{writable:!0,value:{}}),u(this,g,{writable:!0,value:!1}),u(this,b,{writable:!0,value:"powermail_form_error"}),u(this,S,{writable:!0,value:"powermail_fieldset_error"}),u(this,k,{writable:!0,value:"powermail_field_error"}),u(this,W,{writable:!0,value:"data-powermail-class-handler"}),u(this,A,{writable:!0,value:"powermail-errors-list"}),r(this,w,i)}return i(e,[{key:"validate",value:function(){s(this,y,gt).call(this),s(this,x,bt).call(this)}}]),e}();function gt(){var t=this;n(this,w).setAttribute("novalidate","novalidate"),n(this,w).addEventListener("submit",(function(e){(!1===n(t,g)||s(t,dt,se).call(t))&&e.preventDefault(),s(t,E,St).call(t),!1===s(t,dt,se).call(t)&&n(t,w).requestSubmit()}))}function bt(){var t=s(this,ht,re).call(this),e=this;t.forEach((function(t){t.addEventListener("blur",(function(){s(e,L,kt).call(e,t)})),t.addEventListener("change",(function(){s(e,L,kt).call(e,t)}))}))}function St(){for(var t=s(this,ht,re).call(this),e=0;e<t.length;e++)s(this,L,kt).call(this,t[e])}function kt(t){var e=!1;t=s(this,ft,le).call(this,t),e=s(this,q,Wt).call(this,t,e),e=s(this,_,At).call(this,t,e),e=s(this,z,yt).call(this,t,e),e=s(this,M,xt).call(this,t,e),e=s(this,C,Et).call(this,t,e),e=s(this,I,Lt).call(this,t,e),e=s(this,F,qt).call(this,t,e),e=s(this,T,_t).call(this,t,e),e=s(this,P,zt).call(this,t,e),e=s(this,N,Mt).call(this,t,e),s(this,pt,oe).call(this,t,e),s(this,wt,ue).call(this),s(this,mt,ce).call(this,t),r(this,g,!0)}function Wt(t,e){return!1===e&&(s(this,O,Ct).call(this,t)&&!1===s(this,B,Rt).call(this,t)?(s(this,at,Xt).call(this,"required",t),e=!0):s(this,nt,Yt).call(this,"required",t)),e}function At(t,e){return!1===e&&(s(this,j,It).call(this,t)&&!1===s(this,J,Ut).call(this,t)?(s(this,at,Xt).call(this,"email",t),e=!0):s(this,nt,Yt).call(this,"email",t)),e}function yt(t,e){return!1===e&&(s(this,D,Ft).call(this,t)&&!1===s(this,K,Gt).call(this,t)?(s(this,at,Xt).call(this,"url",t),e=!0):s(this,nt,Yt).call(this,"url",t)),e}function xt(t,e){return!1===e&&(s(this,R,Tt).call(this,t)&&!1===s(this,Q,Ht).call(this,t)?(s(this,at,Xt).call(this,"pattern",t),e=!0):s(this,nt,Yt).call(this,"pattern",t)),e}function Et(t,e){return!1===e&&(s(this,U,Pt).call(this,t)&&!1===s(this,X,Vt).call(this,t)?(s(this,at,Xt).call(this,"number",t),e=!0):s(this,nt,Yt).call(this,"number",t)),e}function Lt(t,e){return!1===e&&(s(this,G,Nt).call(this,t)&&!1===s(this,Y,$t).call(this,t)?(s(this,at,Xt).call(this,"min",t),e=!0):s(this,nt,Yt).call(this,"min",t)),e}function qt(t,e){return!1===e&&(s(this,H,Ot).call(this,t)&&!1===s(this,Z,Bt).call(this,t)?(s(this,at,Xt).call(this,"max",t),e=!0):s(this,nt,Yt).call(this,"max",t)),e}function _t(t,e){return!1===e&&(s(this,V,jt).call(this,t)&&!1===s(this,tt,Jt).call(this,t)?(s(this,at,Xt).call(this,"length",t),e=!0):s(this,nt,Yt).call(this,"length",t)),e}function zt(t,e){return!1===e&&(s(this,$,Dt).call(this,t)&&!1===s(this,et,Kt).call(this,t)?(s(this,at,Xt).call(this,"powermailfilesize",t),e=!0):s(this,nt,Yt).call(this,"powermailfilesize",t)),e}function Mt(t,e){return!1===e&&(s(this,$,Dt).call(this,t)&&!1===s(this,it,Qt).call(this,t)?(s(this,at,Xt).call(this,"powermailfileextensions",t),e=!0):s(this,nt,Yt).call(this,"powermailfileextensions",t)),e}function Ct(t){return t.hasAttribute("required")||"true"===t.getAttribute("data-powermail-required")}function It(t){return"email"===t.getAttribute("type")||"email"===t.getAttribute("data-powermail-type")}function Ft(t){return"url"===t.getAttribute("type")||"url"===t.getAttribute("data-powermail-type")}function Tt(t){return t.hasAttribute("pattern")||t.hasAttribute("data-powermail-pattern")}function Pt(t){return"number"===t.getAttribute("type")||"integer"===t.getAttribute("data-powermail-type")}function Nt(t){return t.hasAttribute("min")||t.hasAttribute("data-powermail-min")}function Ot(t){return t.hasAttribute("max")||t.hasAttribute("data-powermail-max")}function jt(t){return t.hasAttribute("data-powermail-length")}function Dt(t){return"file"===t.getAttribute("type")}function Rt(t){return""!==s(this,ut,ae).call(this,t)}function Ut(t){if(""===t.value)return!0;return new RegExp(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,"").test(s(this,ut,ae).call(this,t))}function Gt(t){if(""===t.value)return!0;return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","").test(s(this,ut,ae).call(this,t))}function Ht(t){if(""===t.value)return!0;var e=t.getAttribute("data-powermail-pattern")||t.getAttribute("pattern");return new RegExp(e,"").test(s(this,ut,ae).call(this,t))}function Vt(t){return""===t.value||!1===isNaN(t.value)}function $t(t){if(""===t.value)return!0;var e=t.getAttribute("min")||t.getAttribute("data-powermail-min");return parseInt(t.value)>=parseInt(e)}function Bt(t){if(""===t.value)return!0;var e=t.getAttribute("max")||t.getAttribute("data-powermail-max");return parseInt(t.value)<=parseInt(e)}function Jt(t){if(""===t.value)return!0;var e=t.getAttribute("data-powermail-length").replace("[","").replace("]","").split(","),i=e[0].trim(),a=e[1].trim();return parseInt(t.value.length)>=parseInt(i)&&parseInt(t.value.length)<=parseInt(a)}function Kt(t){if(""===t.value)return!0;var e=h.getLargestFileSize(t),i=t.getAttribute("data-powermail-powermailfilesize").split(",");return e<=parseInt(i[0])}function Qt(t){return""===t.value||h.isFileExtensionInList(h.getExtensionFromFileName(t.value),t.getAttribute("accept"))}function Xt(t,e){s(this,nt,Yt).call(this,t,e),s(this,rt,Zt).call(this,e);var i=e.getAttribute("data-powermail-"+t+"-message")||e.getAttribute("data-powermail-error-message")||"Validation error";s(this,st,ee).call(this,i,e)}function Yt(t,e){s(this,lt,te).call(this,e),s(this,ot,ie).call(this,e)}function Zt(t){if(t.getAttribute(n(this,W)))for(var e=document.querySelectorAll(t.getAttribute(n(this,W))),i=0;i<e.length;i++)e[i].classList.add(n(this,k));else t.classList.add(n(this,k))}function te(t){if(t.getAttribute(n(this,W)))for(var e=document.querySelectorAll(t.getAttribute(n(this,W))),i=0;i<e.length;i++)e[i].classList.remove(n(this,k));else t.classList.remove(n(this,k))}function ee(t,e){var i=document.createElement("ul");i.classList.add(n(this,A)),i.classList.add("filled"),i.setAttribute("data-powermail-error",s(this,ct,ne).call(this,e));var a=document.createElement("li");i.appendChild(a);var r=document.createTextNode(t);if(a.appendChild(r),null!==e.getAttribute("data-powermail-errors-container")){var l=document.querySelector(e.getAttribute("data-powermail-errors-container"));null!==l&&l.appendChild(i)}else e.parentNode.appendChild(i)}function ie(t){var e=document.querySelector('[data-powermail-error="'+s(this,ct,ne).call(this,t)+'"]');null!==e&&e.remove()}function ae(t){var e=t.value;if("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")){e="";var i=t.getAttribute("name"),a=t.closest("form").querySelector('input[name="'+i+'"]:checked');null!==a&&(e=a.value)}return e}function ne(t){return t.getAttribute("name").replace(/[^\w\s]/gi,"")}function re(){return n(this,w).querySelectorAll('input:not([data-powermail-validation="disabled"]):not([type="hidden"]):not([type="submit"]), textarea:not([data-powermail-validation="disabled"]), select:not([data-powermail-validation="disabled"])')}function le(t){if("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")){var e=t.getAttribute("name"),i=t.closest("form");t=i.querySelectorAll('[name="'+e+'"]')[0]}return t}function se(){return n(this,m)}function oe(t,e){n(this,v)[t.getAttribute("name")]=e}function ue(){var t=!1;for(var e in n(this,v))n(this,v).hasOwnProperty(e)&&!0===n(this,v)[e]&&(t=!0);r(this,m,t)}function ce(t){var e=t.closest("fieldset.powermail_fieldset");s(this,dt,se).call(this)?(n(this,w).classList.add(n(this,b)),null!==e&&e.classList.add(n(this,S))):(n(this,w).classList.remove(n(this,b)),null!==e&&e.classList.remove(n(this,S)))}var he=new WeakSet,fe=new WeakSet,de=new WeakSet,pe=new WeakSet,we=new WeakSet,me=new WeakSet,ve=new WeakSet,ge=new WeakSet,be=new WeakSet;function Se(){(new p).validate()}function ke(){(new f).initialize()}function We(){var t=this;document.querySelectorAll("form[data-powermail-ajax]").forEach((function(e){e.addEventListener("submit",(function(i){if(i.preventDefault(),!1===e.classList.contains("powermail_form_error")){var a=e.getAttribute("action"),n=e.getAttribute("data-powermail-form"),r=e.getAttribute("data-powermail-ajax-uri");s(t,we,ye).call(t,e),fetch(a,{body:new FormData(e),method:"post"}).then((function(t){return t.text()})).then((function(i){var a=(new DOMParser).parseFromString(i,"text/html").documentElement.querySelector('[data-powermail-form="'+n+'"]');if(null!==a){var l=document.querySelector('[data-powermail-form="'+n+'"]').closest(".tx-powermail");l.innerHTML="",l.appendChild(a)}else null!==r?h.redirectToUri(r):e.submit();s(t,de,We).call(t),s(t,he,Se).call(t),s(t,fe,ke).call(t),s(t,be,qe).call(t)})).catch((function(t){console.log(t)}))}}))}))}function Ae(){null!==document.querySelector('[data-powermail-location="prefill"]')&&navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.latitude,i=t.coords.longitude,a=document.querySelector("[data-powermail-eidurl]").getAttribute("data-powermail-eidurl");fetch(a+"?eID=powermailEidGetLocation&lat="+e+"&lng="+i).then((function(t){return t.text()})).then((function(t){for(var e=document.querySelectorAll('[data-powermail-location="prefill"]'),i=0;i<e.length;i++)e[i].value=t})).catch((function(t){console.log(t)}))}))}function ye(t){s(this,me,xe).call(this,t);var e=t.querySelector(".powermail_submit");if(null!==e)e.parentNode.appendChild(s(this,ve,Ee).call(this));else{var i=t.closest(".tx-powermail");null!==i&&i.appendChild(s(this,ve,Ee).call(this))}}function xe(t){var e=t.closest(".tx-powermail");if(null!==e){var i=e.querySelector(".powermail_progressbar");null!==i&&i.remove()}}function Ee(){var t=document.createElement("div");t.classList.add("powermail_progressbar");var e=document.createElement("div");e.classList.add("powermail_progress");var i=document.createElement("div");return i.classList.add("powermail_progress_inner"),t.appendChild(e),e.appendChild(i),t}function Le(){for(var t=document.querySelectorAll(".powermail_all_type_password.powermail_all_value"),e=0;e<t.length;e++)t[e].innerText="********"}function qe(){document.querySelectorAll("img.powermail_captchaimage").forEach((function(t){var e=h.getUriWithoutGetParam(t.getAttribute("src"));t.setAttribute("src",e+"?hash="+h.getRandomString(5))}))}(new(i((function e(){t(this,e),c(this,be),c(this,ge),c(this,ve),c(this,me),c(this,we),c(this,pe),c(this,de),c(this,fe),c(this,he),a(this,"use strict",void 0),a(this,"initialize",(function(){var t=this;s(t,he,Se).call(t),s(t,fe,ke).call(t),s(t,de,We).call(t),s(t,pe,Ae).call(t),s(t,ge,Le).call(t)}))})))).initialize()}();
